class Product {
    name: ProductName
    type: ProductType
}

typealias ProductName = "MeshGuard"|"ServiceNavigator"|"MicroFleet"

typealias ProductRole = "server"|"client"

class Server {
    hostname: String
    ipaddress: String
    products: Mapping<ProductName, ProductType>
    function isServer(n: ProductName): Boolean = products.containsKey("MeshGuard") && products["MeshGuard"] == "server"
}

class Datacenter {
    meshguard: MeshGuard = new {
        servercount = servers.toList().count((it) -> it.isServer("MeshGuard") )
    }
    servers: Listing<Server>
}


class MeshGuard {
    clustername: String
    servercount: Int
}

datacenter: Datacenter
